# 네트워크 프로토콜

프로토콜이란?

- 컴퓨터와 원거리 통신 장비 사이에서 메시지를 주고 받는 양식과 규칙의 체계
- 네트워크에 연결된 컴퓨터들끼리 데이터를 주고받을 수 있도록 미리 약속한 전송 규약 및 규칙
- 사용자 별로 환경이 다르고 통신의 규칙이 없으면 충돌, 지연 등 여러가지 문제가 발생할 수 있다.
  이를 방지하기 위해서 프로토콜 ( 통신 규약 )을 만드는 것으로 사전에 발생할 수 있는 여러가지 문제들을 해결할 수 있다.



프로토콜 스택이란?

- 데이터 통신에 활용되는 프로토콜의 구조에 관한 개념으로 계층화된 구조(스택 구조)로 모여 있는 프로토콜의 집합,
  프로토콜 슈트 ( Protocol Suite ) 또는 프로토콜 패밀리 ( Protocol Family )라 불리기도 한다.
- TCP / IP 를 프로토콜 스택 이라고 할 수 있다. (자세한 내용은 후술 하겠다.)



## OSI 참조모델 ( OSI 7 Layers )

![osi_7_layers](Network_Protocol.assets/osi_7_layers.png)

[^osi 7 layers]: https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Network/OSI%207%20%EA%B3%84%EC%B8%B5.md

- 국제표준화기구(ISO) 에서 개발한 모델로, 컴퓨터 네트워크 프로토콜 디자인과 통신을 계층으로 나누어서 설명한 것이다.
- 프로토콜을 기능별로 나눈 것이다.
- 각 계층은 하위 계층의 기능만을 이용하고, 상위 계층에게 기능을 제공한다.
- '프로토콜 스택' 혹은 '스택'은 이러한 계층들로 구성되는 프로토콜 시스템이 구현된 시스템을 가리킨다.
  프로토콜 스택은 하드웨어나 소프트웨어 혹은 둘의 혼합으로 구현될 수 있다.
- 일반적으로 하위계층은 하드웨어, 상위 계층은 소프트웨어로 구현된다.
- 표준이라기 보다는 표준의 표준화로써, 표준화를 유도하기 위한 기본 골격이다.
  ( 각 계층별로, 다양한 표준 프로토콜이 개발, 발전될 수 있도록 기본틀을 제공한다. )
- 계층구조를 가지는 것으로 각 구간별로 데이터 자체의 흐름을 알 수 있다.
  트러블 슈팅이 용이해지며, 각 환경과의 호환성을 해결할 수 있다.



### 1. Physical Layer - 물리 계층

> PHY / Bit 단위 / 전기적 신호, 물리적 회선 등을 통해서 데이터를 전달하는 역할

- 데이터를 물리 매체상으로 전송하는 역할을 담당하는 계층으로 전송을 위해서 필요한 물리적 링크의 설정, 유지, 해제를 담당한다.
- 사용자 장비와 네트워크 종단장비 사이의 물리적, 전기적인 인터페이스 규정에 초점을 두고 잇으며, 전송 선로의 종류에 따라서 전송방식과 인코딩 방식을 결정한다.
- Bit 단위 위주의 송수신을 제공한다.
- 데이터 전달의 역할을 한다.



### 2. Data-Link Layer - 데이터링크 계층

> DLL / 프레임(Frame) 단위 /  3계층 프로토콜을 전송, 운반, 전달하는 역할

- 전송 단위 : Frame
- 주소 : Mac
- 물리계층의 있는 그대로의 전송 설비를 신뢰할 수 있는 링크로 변환한다.
  상위 계층인 네트워크 계층에게 오류없는 물리계층으로 보이도록 한다.
- 네트워크계층에서 정보를 받아 주소와 제어정보를 헤더와 테일에 추가한다.



### 3. Network Layer - 네트워크 계층

> 패킷(Packet) 단위 / 데이터를 안전하고 빠르게 전달하는 역할

- 전송 단위 : Packet
- 주소 : IP
- 송신 측에서 수신 측까지 데이터를 안전하게 전달하기 위해서 논리적 링크( 네트워크 )를 설정하고 상위계층 데이터를 작은 크기의 패킷으로 분할하여 전송하는 역할을 수행한다.
- 데이터를 목적지까지 가장 안전하고 빠르게 전달하도록 한다. ( Routing 기능 )



### 4. Transport Layer - 전송 계층

> 세그먼트 (Segment) 단위 / 송신자와 수신자를 연결하는 역할

- 전송단위 : Segment
- 주소 : Port
- 송신자와 수신자를 연결하는 통신 서비스를 제공한다.
- 전송 프로토콜 중 가장 잘 알려진 것은 연결 지향 전송방식을 사용하는 전송 제어 프로토콜(TCP)이다.
  보다 단순한 전송에 사용되는 사용자 데이터그램 프로토콜(UDP)도 있다.
- OSI 7계층 구조는 전송계층을 기준으로 하위계층으로 이루어진 네트워크 서비스와 상위 계층으로 이루어진 사용자 서비스로 구별된다.
- TCP : 전송되는 패킷에 오류와 중복이 없도록 하고, 보낸 순서대로 상대편이 받을 수 있게하는 신뢰성있는 데이터 전송을 보장하는 프로토콜
- UDP : 전송되지 않은 패킷을 무시하고 도착한 순서대로 패킷을 결합하기 때문에 신뢰성을 보장할 수는 없으나, 속도가 빠른 프로토콜



### 5. Session Layer - 세션 계층

> 메세지 (message) 단위 / 응용 프로세스 간의 통신을 제어하는 역할

- 전송단위 : message
- 실제 이용자의 응용 프로그램 사이에서 세션이라고 불리는 연결을 확립하고 유지하며, 동기화하는 기능을 제공한다.
- 세션 계층은 표현 계층으로 부터 받은 데이터를 효율적인 세션 관리를 위해서 짧은 데이터 단위로 나눈 후에 전송 계층으로 내려보낸다.
- TCP/IP 세션을 만들고 없애는 책임을 지닌다.
- 세션 (Session)
  - 네트워크 상에서 양 종단간 일회용 논리적 연결
  - 반영구적이고 상호작용적인 정보 교환을 전제하는 둘 이상의 통신 장치나 컴퓨터와 사용자 간의 대화나 송수신 연결상태를 의미하는 보안적인 다이얼로그(dialogue) 및 시간대를 가리킨다.
  - 연결된 상태에서 연결이 끝나는 그 시점까지를 세션이라고 한다.



### 6. Presentation Layer - 표현 계층

> 메세지(message) 단위 / 서로 다른 데이터 표현 방식을 하나의 통일된 구문형식으로 변환시키는 역할

- 전송단위 : message
- 네트워크 상에서 시스템에 따라서 다양한 데이터 표현 방식이 존재하는데, 이것을 하나의 통일된 구문방식으로 변환시켜서 송 수신자가 공통으로 이해할 수 있도록 하는 기능을 제공한다.
- 송신 측의 표현계층은 응용계층으로부터 받은 데이터의 보안과 효율적인 전송을 위해서 암호화와 압축을 진행한 후에 세션계층에 데이터를 보낸다.
- 인코딩 동작도 이 계층에서 이루어진다.
  - EBCDIC (8비트) 을 ASCII (7비트) 으로 인코딩한다.



### 7. Application Layer - 응용 계층

> 메세지(message)단위 / 사용자 인터페이스를 제공하는 등 일반적인 응용 프로세스를 제공하는 역할

- 전송단위 : message
- 최 상위 계층으로 사용자가 네트워크에 접속하는 것을 가능하게 한다.
  - 전자우편, 파일 전송 등 사용자 인터페이스를 제공한다.



## TCP / IP

![tcpip_layer](Network_Protocol.assets/tcpip_layer.webp)

[^tcp/ip vs osi layer]: https://chloe-codes1.gitbook.io/til/network/03_tcp_ip







## 참고

- https://codinglevelup.tistory.com/88

- https://ko.wikipedia.org/wiki/%ED%86%B5%EC%8B%A0_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C

- https://ko.wikipedia.org/wiki/OSI_%EB%AA%A8%ED%98%95

- https://freloha.tistory.com/23

- https://soniacomp.medium.com/%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%9D%BC%EB%A9%B4-%EC%95%8C%EC%95%84%EC%95%BC%ED%95%A0-%EC%9D%B8%ED%84%B0%EB%84%B7-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C-ip-tcp-http-cce6fece3851

- https://joonfluence.tistory.com/96

- https://goodmilktea.tistory.com/90

- http://www.ktword.co.kr/test/view/view.php?no=432

- https://goitgo.tistory.com/25

  

