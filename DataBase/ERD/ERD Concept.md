# ERD

> Entity Relationship Diagram
>
> 개체 관계 모델링 프로세스의 산출물
>
> 개체 속성과 개체 간 관계를 도표로 표현한 것



## 각 요소별 개념, 요소



### ER 모델

- 기본 요소

  - Entity
    - 시스템화 하고자하는 사건이나 사물

  - Relationship
    - 엔티티간, 애트리뷰트간의 연관성
  - Attribute
    - 엔티티, 관계성의 성질을 나타내는 더 이상 쪼갤 수 없는 정보의 단위

  -> 실세계의 모든 업무체계는 기본요소 3가지로 모두 표현이 가능하다.



### 개체 ( Entity )

- 개념
  - 시스템화 하고자 하는 사물이나 사건
  - 현실 세계의 객체
    예) 사원, 남자, 부서, 도시, 계약 ...





### 관계성

- 개념
  - 개체간의 연관성을 나타내는 것
    예시) 소속된다, 관리된다, 소유한다 ...
- 종류
  - 관계의 종류
    - 이진관계, 순환관계, 삼진관계
    - 관계성 ( Cardinality ) : 1대1, 1대N, N대N



## 관계 표현법

### 표기 방법

- One
  ![image-20210903070752907](ERD%20Concept.assets/image-20210903070752907.png)
  - 일대일 혹은 일대다 관계이다.
  - 주로 하나의 외래키가 걸린 관계이다.
  - '하나의 A는 하나의 B로 구성되어 있다.' 로 풀이할 수 있다.
- Many
  ![image-20210903070856311](ERD%20Concept.assets/image-20210903070856311.png)
  - 다대다 관계이다.
  - 중계 테이블을 통해서 여러 개의 데이터를 바라보고 있을 때 사용한다.
  - '하나의 A는 하나 이상의 B로 구성되어 있다.' 로 풀어진다.

- One (and only one)
  ![image-20210903070447278](ERD%20Concept.assets/image-20210903070447278.png)
  - 일대일 관계, 하나의 row 끼리만 연결된 데이터이다.
- Zero or one
  ![image-20210903070953553](ERD%20Concept.assets/image-20210903070953553.png)
  - 일대일 혹은 일대다 관계를 가지고 있으나, 필수조건이 아님을 의미한다.
    - 이거는 좀 고민해볼 필요가 있는데, 0~1 의 값이라고 생각한다.
      일대일 관계를 선택하는 것이라서 있어도 되고 없어도 되는 것이 아닐까?
  - 개인정보 동의 시에 필수 값 구분과 선택 값 구분이라고 볼 수 있다.
  - '하나의 A 는 하나 이하의 B로 구성되어 있다.'
- One or many
  ![image-20210903070536824](ERD%20Concept.assets/image-20210903070536824.png)
  - 일대일 혹은 다대다 관계를 가지고 있음을 의미한다.
  - 관계를 가지고 있으나, 참조되는 row 값들이 불명확함을 의미한다.
- Zero or many
  ![image-20210903071840087](ERD%20Concept.assets/image-20210903071840087.png)
  - 참조하는 테이블과의 관계가 불명확한 경우이다.
  - 장바구니처럼 row 생성값이 없을 수도, 하나일 수도, 여러 개일 수도 있는 경우이다.



### 1. 일 대 일 ( 식별 관계 )



![image-20210903061453837](ERD%20Concept.assets/image-20210903061453837.png)

- 다이어그램 설명
  - address 테이블은 person_id 를 기본키로 사용한다.
    또한 person_id 를 통해서 person 테이블을 참조한다
  - 역으로 person 테이블에서는 id 를 가지고 address 테이블을 참조할 수 있다.
- 풀이
  - 한 명의 person 은 하나의 address 를 가질 수 있다.
  - 상세 주소는 person id 가 없다면 존재할 수 없다 (식별관계)
  - person = 주인 테이블, address = 자식 테이블
    - 부모테이블의 id를 저장하는 테이블은 자식 테이블이 되고,
      데이터를 제공하는 테이블은 부모 테이블이 된다.



### 2. 일 대 다 ( 참조 필수 )

![image-20210903062220919](ERD%20Concept.assets/image-20210903062220919.png)

- 부서와 회사원 간의 관계를 표현한 ERD

- 풀이
  - 회사원은 반드시 한 개의 부서에 소속 되어야 한다.
    - 점선이라서 부서를 참조하지 않고도 생성할 수는 있다.
  - 한 개의 부서에 여러 사원이 소속될 수 있다.
  - 한 개의 부서에 소속된 회사원이 한명도 없을 수 있다.



- 직선과 점선의 차이
  - 직선 == 식별 관계
    - ![image-20210903065347930](ERD%20Concept.assets/image-20210903065347930.png)
    - 기본키에 외래키가 포함되어 있다.
    - 부모테이블의 기본키가 자식테이블의 외래키이자 기본키로 사용되는 관계
    - 자식 테이블의 행을 추가할 때 부모테이블의 참조행이 없다면 자식테이블의 행을 추가할 수 없다.
      - 부모테이블의 기본키가 없으면 자식테이블은 정보를 식별할 수 없으므로 데이터를 넣을 수 없다.
  - 점선 == 비식별 관계
    - ![image-20210903065532826](ERD%20Concept.assets/image-20210903065532826.png)
    - 기본키에 외래키가 포함되어 있지 않다.
    - 부모 테이블을 참조한 테이블에서 참조된 외래키가 기본키가 아닌 일반속성(컬럼) 으로 참조되었을 때를 말한다.
    - 부모 테이블 기본키가 자식 테이블의 일반 컬럼이나 외래키 컬럼에 저장되는 관계이다.
    - 자식 테이블의 행을 추가할 때 부모 테이블의 참조 행이 없어도 자식 테이블의 행을 추가할 수 있다.
      - 회사의 부서와 사원의 관계 ( 사원이 부서에 배정되지 않을 수도 있다. )

- 기본키
  - 테이블의 하나의 행의 여러 정보들 중 이를 식별해 낼 수 있는 정보
- 외래키
  - 테이블간의 관계( 참조하는 테이블과 참조되는 테이블 간의 관계)를 나타내는 정보



### 3. 일 대 다 ( 참조 Null 허용 )

![image-20210903065934907](ERD%20Concept.assets/image-20210903065934907.png)

- 풀이
  - 회사원이 반드시 부서에 소속될 필요는 없다.
    - 동그라미 = zero
      없어도 된다는 뜻이다.
  - 한 개의 부서에 여러 회사원이 소속될 수 있다.
  - 한 개의 부서에 소속된 회사원이 한 명도 없을 수도 있다.



## ERD 툴

- ERD cloud
- 워크벤치
  - Database - Reverse Engineer - Hostname, port, username 입력하고 이동
  - 워크벤치에서 관계를 연결해줄 때, 연결하는 순서도 중요한 듯 하다.
    참조하는 주체? 에서 시작해야 하는 듯 하다.



- 출처
  - https://huskdoll.tistory.com/541
  - https://bamdule.tistory.com/46
  - https://choiseungyoun.github.io/posts/what-is-erd/