# Javascript 구조분해할당

>Destructuring Assignment

- 언제 사용하는가?
  - 함수에 객체나 배열을 전달해야하는 경우
  - 객체나 배열에 저장된 데이터 전체가 아닌 일부만 필요한 경우
  - 함수의 매개변수가 많거나 매개변수 기본값이 필요한 경우

-> 구조분해할당은 배열이나 객체의 속성을 해체하여 그 값을 개별 변수에 담아야할 때 사용하는 표현식이다.



## 배열 분해하기

```javascript
let arr = [ "Bora", "Lee"];
// 구조 분해 할당
let [first, last ] = arr;

console.log(first); // Bora
console.log(last); // Lee
```

인덱스를 이용해서 배열에 접근하지 않고 변수를 선언할 수 있다.

```javascript
// 구조 분해 할당
let [first, last] = "Bora Lee".split(' ');
console.log(first);// Bora
console.log(last);// Lee
```

`split`과 같은 반환값이 배열인 메서드를 함깨 사용해도 좋다.



**분해(destructuring)의 의미**

- 구조 분해 할당이란 어떤 것을 복사한 이후에 변수로 '분해' 해준다는 의미때문에 붙여졌다.
- 분해 대상은 수정, 파괴되지 않는다.



**쉼표 사용을 통한 요소 무시하기**

```js
let [ firstName, ,title ] = ["이지은", "드라마", "나의아저씨", "주연"];
console.log(title); //나의아저씨
```

- 쉼표를 사용해서 필요하지 않은 요소를 생략할 수 있다.
- 두 번째 요소를 생략하고 세 번째 요소를 `title` 이라는 변수에 할당했다.
  할당할 변수가 없어서 네 번째 요소는 생략했다.



**우측에는 모든 이터러블이 올 수 있다.**

```js
let [a, b, c] = "abc";
console.log(a, b, c); // a b c

let [one, two, three] = new Set([1,2,3]);
console.log(one, two, three); // 1 2 3
```

- 배열 뿐만 아니라 모든 반복 가능한 객체에 구조 분해 할당을 적용할 수 있다.



**좌측에는 뭐든지 올 수 있다.**

```js
let user = {};
[user.name, user.surname] = "Bora Lee".split(' '); // (2) ['Bora', 'Lee']
console.log(user.name, user.surname); // Bora Lee
```

- 좌측에는 할당할 수 있는 것이라면 다 들어갈 수 있다.
- 객체 프로퍼티도 가능하다.



**변수 교환 트릭**

```js
let kicker = "Son";
let keeper = "Jo";
// 변수 교환 트릭
[kicker, keeper] = [keeper, kicker]; // (2) ['Jo', 'Son']
console.log(kicker, keeper); // Jo Son
```



### `...`으로 나머지 요소 가져오기

```js
let [ name, genre, ...rest] = ["이지은", "드라마", "나의아저씨", "주연"];
name // '이지은'
genre //'드라마'
rest[0] // '나의아저씨'
rest[1] // '주연'
```

- 배열에 앞쪽에 위치한 값 몇개만 할당하고 나머지 값들은 한 곳에 모아서 저장하고 싶을때 `...`를 사용해서 모아줄 수 있다.



**할당할 때의 기본값**

```js
let [first, last] = [];
first // undefined
last // undefined
```

- 할당하고자 하는 변수의 개수가 분해하고자 하는 배열의 길이보다 크더라도 에러가 발생하지 않는다.
  -> `undefined`로 취급해버리기 때문이다.

```js
// 기본값 설정하기
let [ name = "son", position = "striker" ] = ["kane"];
name // 'kane'
position // 'striker'
```

- 왼쪽에서 구조 분해 할당을 할 때, `=` 를 사용해서 기본값을 설정해줄 수 있다.

```js
function A (x) {
    return `function A : ${x}`;
}
function B (x) {
    return `function B : ${x}`;
}
let [first = A('Hi'), last = A('Hello')] = [B('Welcome')];
first // 'function B : Welcome'
last // 'function A : Hello'
```

- 더 복잡한 표현식이나 함수 호출도 기본값이 될 수 있다.



## 객체 분해하기

```js
let {var1, var2} = {var1: 'first', var2:'last'};
var1 // 'first'
var2 // 'last'
```

- 우측에는 분해하고자 하는 객체를 넣는다.
- 좌측에는 상응하는 객체 프로퍼티의 패턴을 넣는다.







[mozilla - 구조분해할당](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)

[모던 자바스크립트 튜토리얼 - 구조분해할당](https://ko.javascript.info/destructuring-assignment)